// This is your Prisma schema for PostgreSQL (Neon)
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                      String             @id @default(uuid())
  discordId              String             @unique @map("discord_id")
  email                  String             @unique
  image                  String?
  role                   String             @default("USER")
  subscriptionStatus     String             @default("INACTIVE")
  subscriptionPlan       String?
  subscriptionExpiresAt  DateTime?          @map("subscription_expires_at")
  createdAt              DateTime           @default(now()) @map("created_at")
  updatedAt              DateTime           @updatedAt @map("updated_at")

  @@map("users")
}

model Username {
  id            String    @id @default(uuid())
  name          String
  platform      String
  category      String
  status        String    @default("AVAILABLE")
  availableDate DateTime? @map("available_date")
  foundAt       DateTime  @default(now()) @map("found_at")
  createdAt     DateTime  @default(now()) @map("created_at")

  @@unique([name, platform])
  @@map("usernames")
}

model SearchLog {
  id          String   @id @default(uuid())
  discordId   String   @map("discord_id")
  searchCount Int      @default(1) @map("search_count")
  lastSearched DateTime @default(now()) @map("last_searched")
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@unique([discordId])
  @@map("search_logs")
}

model Webhook {
  id          String   @id @default(uuid())
  channelId   String   @unique @map("channel_id")
  platform    String   @default("discord")
  category    String   @default("RANDOM")
  webhookUrl  String?  @map("webhook_url")
  serverId    String?  @map("server_id")
  isActive    Boolean  @default(true) @map("is_active")
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("webhooks")
}
